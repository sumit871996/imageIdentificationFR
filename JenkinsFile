pipeline 
{
     agent {
     label 'imageidentififr'
     }
     environment {     
    DOCKERHUB_CREDENTIALS= credentials('dockerhub_id')     
} 
     stages{
         stage('Checkout') {
          steps{
               git 'https://github.com/sumit871996/imageIdentificationFR.git'
               }
          }
          
          stage('Docker build') {
          steps{
               sh 'docker image build -t sumithpe/imageidentifront .'
               }  
          }
          
          
          stage('Docker push') {
          steps{
               withCredentials([usernamePassword(credentialsId: 'dockerhub_id', usernameVariable: 'DOCKERHUB_CREDENTIALS_USR', passwordVariable: 'DOCKERHUB_CREDENTIALS_PSW')]) {
                    script {
                        def dockerRegistry = 'dockerhub' 
                        docker.withRegistry("https://${dockerRegistry}.com", "docker") 
                        {
                            docker.login(username: DOCKERHUB_CREDENTIALS_USR, password: DOCKERHUB_CREDENTIALS_PSW)
                        }
                    }
               }  
          }
          }
          
          
          
          
          
     }
    
   
}
