pipeline 
{
     agent {
     label 'imageidentififr'
     }
     stages{
         stage('Checkout') {
          steps{
               git 'https://github.com/sumit871996/imageIdentificationFR.git'
               }
          }
          
          stage('Docker build') {
          steps{
               sh 'docker image build -t sumithpe/imageidentifront .'
               }  
          }
          
          
          stage('Docker push') {
          steps{
               withCredentials([usernamePassword(credentialsId: 'dockerhub_id', usernameVariable: 'DOCKER_USERNAME', passwordVariable: 'DOCKER_PASSWORD')]) {
                    script {
                        def dockerRegistry = 'dockerhub' 
                        docker.withRegistry("https://${dockerRegistry}.com", "docker") 
                        {
                            docker.login(username: DOCKER_USERNAME, password: DOCKER_PASSWORD)
                        }
                    }
               }  
          }
          }
          
          
          
          
          
     }
    
   
}
